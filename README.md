# localstorage-orm

Interact with localStorage as we with an ORM.

## Setup

```typescript
import { Model, Schema } from "localstorage-orm";

const result = await psgcReader.read(filePath);

// Define the schema
interface Person extends Schema {
    name: string;
    age: number;
}

// Use the schema to define the model
const personModel = new Model<Person>("person");
```

## Creating records

```typescript
// Create a new instance of the model with build
const person = personModel.build();

person.name = "John Doe";
person.age = 24;

// Persist the instance
person.save();

// Or use the create method to instantly persist a data
const janeDoe = personModel.create({
    name: "Jane Doe",
    age: 24,
});
```

## Fetching records

```typescript
// Get all records of the model
const allRecords = personModel.list();

// Get a filtered list
const personAged24 = personModel.find({
    age: 24,
});

// Get a single record
const johnDoe = personModel.findOne({
    name: "John Doe",
});

// Get a single record by ID
const johnDoeAgain = personModel.findById(johnDoe.id);
const johnDoeAgainAndAgain = personModel.get(johnDoe.id);
```

## Updating Records

```typescript
// Updating a single instance
johnDoe.name = "Johnny Doe";
johnDoe.save();

for (let person of personAged24) {
    // What's better than 24?
    person.age = 25;
}

// Updating multiple records
personAged24.save();
```

## Deleting records

```typescript
// Delete a single instance
johnDoe.delete();

// Deletes a list of instance
personAged25.delete();
```

## Model Settings

```typescript
const personModelWithSettings = new Model<Person>("person", {
    timestamps: true;
    softDelete: true;
});
```

-   `timestamps`: `boolean` - if true, adds an autogenerated `createdAt` and `updatedAt` property to the schema
-   `softDelete`: `boolean` - if true, adds an `isDeleted` flag to the schema, which is set to true instead of deleting the data

## TODO

-   findAndUpdate
-   findOneAndUpdate
-   findAndDelete
-   findOneAndDelete
-   joins
-   population
-   indexing
-   unique
